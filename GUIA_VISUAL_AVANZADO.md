# ğŸ¯ GuÃ­a Visual - Sistema Avanzado de Ventas

## Flujo de Venta con ExplosiÃ³n de Recetas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PUNTO DE VENTA MEJORADO                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                   â”‚
â”‚  PANEL IZQUIERDO              â”‚    PANEL DERECHO                 â”‚
â”‚  (Productos/Recetas)          â”‚    (Carrito)                     â”‚
â”‚                               â”‚                                   â”‚
â”‚  ğŸ“¦ PRODUCTOS    ğŸ½ï¸ RECETAS  â”‚  ğŸ›’ Carrito                       â”‚
â”‚  â”œâ”€ Agua         â”œâ”€ Tacos    â”‚  â”œâ”€ Cliente: _______              â”‚
â”‚  â”œâ”€ Refresco     â”œâ”€ Pasta    â”‚  â”œâ”€ Mesa: _______                 â”‚
â”‚  â””â”€ CafÃ©         â””â”€ Burger   â”‚  â”‚                               â”‚
â”‚                               â”‚  â”‚ Items:                        â”‚
â”‚                               â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚                               â”‚  â”‚ â”‚ ğŸ½ï¸ Tacos x3         â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ (Receta)             â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ $25 c/u              â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ âš™ï¸ ExplosiÃ³n auto    â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ obs: sin picante    â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ Observaciones:      â”‚      â”‚
â”‚                               â”‚  â”‚ â”‚ ___________         â”‚      â”‚
â”‚                               â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â”‚                               â”‚  â”‚                               â”‚
â”‚                               â”‚  â”‚ Descuento: 10%               â”‚
â”‚                               â”‚  â”‚ Subtotal:  $75.00            â”‚
â”‚                               â”‚  â”‚ IVA 19%:   $14.25            â”‚
â”‚                               â”‚  â”‚ Propina 10%: $8.93           â”‚
â”‚                               â”‚  â”‚ TOTAL: $98.18                â”‚
â”‚                               â”‚  â”‚                               â”‚
â”‚                               â”‚  â”‚ [âœ“ PROCESAR VENTA]           â”‚
â”‚                               â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ExplosiÃ³n de Receta (DetrÃ¡s de Escenas)

```
VENTA DE RECETA: Tacos de Pollo (x3 Ã³rdenes)
â”‚
â”œâ”€ Receta Original:
â”‚  â”œâ”€ Pollo: 250g
â”‚  â”œâ”€ Tortillas: 2 unidades
â”‚  â”œâ”€ Salsa: 50ml
â”‚  â””â”€ Queso: 30g
â”‚
â””â”€> MULTIPLICADO POR 3:
    â”œâ”€ Pollo: 750g âŒ DESCUENTO
    â”œâ”€ Tortillas: 6 unidades âŒ DESCUENTO
    â”œâ”€ Salsa: 150ml âŒ DESCUENTO
    â””â”€ Queso: 90g âŒ DESCUENTO

SE REGISTRA EN BASE DE DATOS:
{
  "venta_id": 1024,
  "venta_item_id": 5001,
  "es_receta": true,
  "receta_id": 15,
  "explosion_detalles": {
    "1": {
      "ingrediente_nombre": "Pollo",
      "cantidad_total": 750,
      "unidad": "gramos"
    },
    "2": {
      "ingrediente_nombre": "Tortillas",
      "cantidad_total": 6,
      "unidad": "unidades"
    }
  }
}
```

---

## Comprobantes Generados

### 1ï¸âƒ£ COMANDA PARA COCINA

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘        ğŸ‘¨â€ğŸ³ COMANDA COCINA               â•‘
â•‘        Carbon & Cheddar                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
Orden: #1024
Hora: 14:30:45
Mesa: 5
Cajero: Juan
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
             PRODUCTOS
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ½ï¸  TACOS DE POLLO x3

Ingredientes necesarios:
   â€¢ 750 gramos de Pollo
   â€¢ 6 unidades de Tortillas
   â€¢ 150 ml de Salsa verde
   â€¢ 90 gramos de Queso fresco

âš ï¸  OBSERVACIONES IMPORTANTES:
   â†’ SIN CEBOLLA ROJA
   â†’ BIEN PICANTE
   â†’ EXTRA QUESO

ğŸ“¦ BEBIDA x3
   â€¢ Coca Cola x3

â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Marque cuando estÃ© listo:
â˜ Cocina â˜ QA (Quality Assurance)

Impresa: 14/12/2024 14:30:47
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 2ï¸âƒ£ RECIBO PARA CAJA

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘      ğŸ§¾ RECIBO DE VENTA                â•‘
â•‘      Carbon & Cheddar                  â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
Recibo #: 1024
Fecha: 14/12/2024
Hora: 14:30:45
Cajero: Juan
Cliente: Carlos PÃ©rez
Mesa: 5
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£

Tacos de Pollo x3             $75.00
Coca Cola x3                  $30.00
Agua embotellada x2            $9.00
                              â”€â”€â”€â”€â”€â”€
Subtotal:                     $114.00
Descuento (10%):             -$11.40
Subtotal neto:               $102.60

IVA (19%):                    $19.49
Propina (10%):               $10.26

â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
TOTAL:                       $132.35
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£

        Â¡Gracias por su compra!
             Vuelva pronto

â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Reportes Granulares

### REPORTE POR HORA

```
ğŸ“Š VENTAS DEL 14/12/2024

MÃ©trica Cards:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Ventas      â”‚  â”‚  Ingresos    â”‚  â”‚  Items       â”‚
â”‚     47       â”‚  â”‚  $3,250.50   â”‚  â”‚     125      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tabla por Hora:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Hora â”‚ Ventas â”‚ Ingresos   â”‚ Promedio    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 09:00â”‚   3    â”‚  $150.25   â”‚ $50.08      â”‚
â”‚ 10:00â”‚   5    â”‚  $275.50   â”‚ $55.10      â”‚
â”‚ 11:00â”‚   8    â”‚  $425.75   â”‚ $53.22      â”‚
â”‚ 12:00â”‚  15    â”‚  $900.00   â”‚ $60.00  â­  â”‚ â† PICO
â”‚ 13:00â”‚  10    â”‚  $625.00   â”‚ $62.50      â”‚
â”‚ 14:00â”‚   6    â”‚  $375.00   â”‚ $62.50      â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GrÃ¡fico Visual:
  Ingresos por Hora
     â”‚
 $900â”‚        â–ˆâ–ˆâ–ˆâ–ˆ
 $800â”‚        â–ˆâ–ˆâ–ˆâ–ˆ
 $700â”‚        â–ˆâ–ˆâ–ˆâ–ˆ
 $600â”‚        â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 $500â”‚        â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 $400â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 $300â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 $200â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
 $100â”‚  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆ
     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
      09:00 12:00 15:00 18:00
```

### REPORTE POR DÃA

```
ğŸ“… VENTAS DE 01/12 A 14/12/2024

MÃ©tricas:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Total Ventas â”‚  â”‚ Total Ingresoâ”‚  â”‚ Promedio DÃ­a â”‚
â”‚     450      â”‚  â”‚  $25,000.00  â”‚  â”‚  $1,785.71   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Tabla Diaria:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Fecha    â”‚ Ventas â”‚ Ingresos â”‚ Descuentos  â”‚ Promedio    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 01/12    â”‚  32    â”‚$1,800.00 â”‚ $150.00     â”‚ $56.25      â”‚
â”‚ 02/12    â”‚  28    â”‚$1,575.00 â”‚ $100.00     â”‚ $56.25      â”‚
â”‚ 03/12    â”‚  35    â”‚$2,100.00 â”‚ $200.00     â”‚ $60.00      â”‚
â”‚ 04/12    â”‚  31    â”‚$1,950.00 â”‚ $175.00     â”‚ $62.90      â”‚
â”‚ 05/12    â”‚  42    â”‚$2,400.00 â”‚ $250.00     â”‚ $57.14  â­  â”‚ â† MÃXIMO
â”‚ ...      â”‚  ...   â”‚  ...     â”‚   ...       â”‚  ...        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Productos MÃ¡s Vendidos (01/12):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Producto       â”‚ Cantidad â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tacos          â”‚   45     â”‚
â”‚ Bebidas        â”‚   32     â”‚
â”‚ Pasta          â”‚   18     â”‚
â”‚ Postres        â”‚   12     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### REPORTE DETALLADO

```
ğŸ“ˆ ANÃLISIS DETALLADO (01/12 A 14/12/2024)

RESUMEN GENERAL:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Cantidad de Ventas:    450   â”‚
â”‚ Total Ingresos:  $25,000.00  â”‚
â”‚ Total Descuentos: $1,200.00  â”‚
â”‚ Total IVA (19%):  $4,750.00  â”‚
â”‚ Ticket Promedio:    $55.56   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

PRODUCTOS VENDIDOS:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Producto     â”‚ Cantidad â”‚ Ingresos  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tacos        â”‚   450    â”‚ $10,500   â”‚
â”‚ Bebidas      â”‚   380    â”‚  $5,700   â”‚
â”‚ Pasta        â”‚   125    â”‚  $3,750   â”‚
â”‚ Postres      â”‚   95     â”‚  $2,850   â”‚
â”‚ CafÃ©         â”‚   200    â”‚  $2,200   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

RECETAS VENDIDAS (con anÃ¡lisis de rentabilidad):
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Receta           â”‚ Cantidad â”‚ Ingresos â”‚ Costo  â”‚ Utilidad â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Tacos de Pollo   â”‚   250    â”‚ $6,250   â”‚$3,750  â”‚ $2,500âœ“  â”‚
â”‚ Pasta a la Crema â”‚   80     â”‚ $2,400   â”‚$1,200  â”‚ $1,200âœ“  â”‚
â”‚ Burger ClÃ¡sico   â”‚   95     â”‚ $2,850   â”‚$1,425  â”‚ $1,425âœ“  â”‚
â”‚ Ensalada         â”‚   75     â”‚ $1,875   â”‚$1,125  â”‚ $750 âœ“   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ÃšLTIMAS VENTAS:
â”Œâ”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  #   â”‚ Fecha               â”‚ Cliente  â”‚ Items    â”‚ Total    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚1024  â”‚14/12 14:30:45       â”‚Carlos    â”‚   3      â”‚$132.35   â”‚
â”‚1023  â”‚14/12 14:15:22       â”‚N/A       â”‚   2      â”‚ $65.50   â”‚
â”‚1022  â”‚14/12 13:45:33       â”‚Ana       â”‚   5      â”‚$198.75   â”‚
â”‚1021  â”‚14/12 13:20:11       â”‚N/A       â”‚   1      â”‚ $35.00   â”‚
â””â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

âœ… OPCIÃ“N: Descargar como CSV
```

---

## Flujo TÃ©cnico Completo

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ USUARIO PROCESA VENTA CON RECETA                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: VentasPageMejorada.jsx                           â”‚
â”‚ â”œâ”€ EnvÃ­a POST /api/ventas/crear-con-explosion             â”‚
â”‚ â””â”€ Body: {items: [{tipo: 'receta', id: 5, cantidad: 3}]}  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend: ventas_avanzado.py (Route)                        â”‚
â”‚ â”œâ”€ Valida token JWT                                        â”‚
â”‚ â””â”€ Llama VentasServiceAvanzado.crear_venta_con_explosion() â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VentasServiceAvanzado: crear_venta_con_explosion()        â”‚
â”‚ â”œâ”€ Valida stock de productos                              â”‚
â”‚ â”œâ”€ Procesa explosiÃ³n: Receta â†’ Ingredientes              â”‚
â”‚ â”œâ”€ Multiplica cantidades: 250g Ã— 3 = 750g                â”‚
â”‚ â”œâ”€ Calcula IVA (19%) y Propina (10%)                     â”‚
â”‚ â”œâ”€ Crea Venta en BD                                       â”‚
â”‚ â”œâ”€ Crea VentaItems con explosion_detalles                â”‚
â”‚ â””â”€ Generan 2 Comandas automÃ¡ticamente                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Base de Datos (SQLite)                                     â”‚
â”‚ â”œâ”€ Tabla Venta: ID=1024, total=$132.35                   â”‚
â”‚ â”œâ”€ Tabla VentaItem: receta_id=5, es_receta=true          â”‚
â”‚ â”‚  explosion_detalles= {pollo: 750g, tortillas: 6...}    â”‚
â”‚ â””â”€ Tabla Comanda: 2 registros (cocina + caja)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Frontend: ComandaViewer Modal                              â”‚
â”‚ â”œâ”€ GET /api/ventas/1024/comanda/cocina                    â”‚
â”‚ â”œâ”€ GET /api/ventas/1024/comanda/caja                      â”‚
â”‚ â””â”€ Muestra ambas en modal (tabs)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â”‚
                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Usuario puede:                                              â”‚
â”‚ â”œâ”€ Ver comanda de cocina (con ingredientes)               â”‚
â”‚ â”œâ”€ Ver recibo de caja (con totales)                       â”‚
â”‚ â”œâ”€ Imprimir comanda                                        â”‚
â”‚ â”œâ”€ Marcar como impresa                                     â”‚
â”‚ â””â”€ Acceder a reportes (hora/dÃ­a/detallado)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Ejemplos de JSON API

### Crear Venta

**Request:**
```json
POST /api/ventas/crear-con-explosion
{
  "items": [
    {
      "tipo": "receta",
      "id": 5,
      "cantidad": 3,
      "precio_unitario": 25.00,
      "observaciones": "sin picante"
    }
  ],
  "cliente_nombre": "Carlos",
  "numero_mesa": "5",
  "descuento": 10,
  "comentarios": ""
}
```

**Response:**
```json
{
  "success": true,
  "message": "Venta creada exitosamente",
  "data": {
    "venta_id": 1024,
    "cliente": "Carlos",
    "mesa": "5",
    "subtotal": 75.00,
    "descuento": 7.50,
    "iva": 12.79,
    "propina": 6.39,
    "total": 98.18,
    "items": 1,
    "explosion_detalles": {
      "1": {
        "ingrediente_id": 1,
        "ingrediente_nombre": "Pollo",
        "cantidad_total": 750,
        "unidad": "gramos"
      },
      "2": {
        "ingrediente_id": 2,
        "ingrediente_nombre": "Tortillas",
        "cantidad_total": 6,
        "unidad": "unidades"
      }
    },
    "comanda_cocina_id": 101,
    "comanda_caja_id": 102
  }
}
```

---

## ConclusiÃ³n

âœ… **Sistema completamente implementado y funcional**
- ExplosiÃ³n de recetas: âœ“ AutomÃ¡tica y registrada
- Comprobantes: âœ“ Duales (cocina + caja), imprimibles
- Reportes: âœ“ Granulares (hora/dÃ­a/detallado)
- Frontend: âœ“ Componentes mejorados y amigables
- Backend: âœ“ APIs REST completas y documentadas

ğŸš€ **Listo para producciÃ³n**
